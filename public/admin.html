<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bingo ‚Äî Admin ¬∑ v3</title>
  <meta name="theme-color" content="#5b2cff" />
  <link rel="stylesheet" href="/styles.css" />
  <link rel="stylesheet" href="/admin.css" />
  <style>
    /* extras ligeros para progreso y badges */
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #3b316e;
      background: #231b47;
      color: #cfd1ff;
      font-size: 12px
    }

    .pill.good {
      border-color: #2a7c2e;
      background: #1c3820;
      color: #c7ffd1
    }

    .pill.warn {
      border-color: #b07b00;
      background: #3a2a00;
      color: #ffe4a3
    }

    .pill.plan {
      border-color: #7848ff;
      background: #281f4f;
      color: #e3d5ff
    }

    .bar {
      height: 10px;
      border-radius: 999px;
      background: #1b1530;
      border: 1px solid #3b316e;
      overflow: hidden
    }

    .bar>span {
      display: block;
      height: 100%
    }

    .bar .tiene {
      background: #2bb673
    }

    .bar .cola {
      background: #f3b14b
    }

    .tright {
      text-align: right
    }

    .muted {
      opacity: .85
    }

    .gap-sm {
      gap: 8px
    }

    .btn-xs {
      padding: 6px 10px;
      border-radius: 10px;
      font-size: 12px
    }

    table td small {
      opacity: .9
    }
  </style>
</head>

<body>
  <main class="layout" role="main">
    <div class="topbar">
      <h1>üõ†Ô∏è Bingo ‚Äî Panel Admin</h1>
      <span class="badge">.env ¬∑ <code>ADMIN_PASSWORD</code></span>
      <span id="pill-plan" class="pill plan" style="margin-left:auto;display:none;">Plan activo</span>
    </div>

    <div class="container admin-single">
      <article class="card">
        <header class="card-head">
          <h2 class="title">Admin</h2>
          <div class="gap-sm" style="display:flex;flex-wrap:wrap">
            <span id="pill-ganadores" class="pill">Ganadores: 0</span>
            <span id="pill-objetivo" class="pill">Gana: 5</span>
            <span id="pill-rango" class="pill">Rango: 1‚Äì10</span>
          </div>
        </header>

        <!-- LOGIN -->
        <section id="login" aria-label="Inicio de sesi√≥n">
          <div class="form-row">
            <div>
              <label for="pwd">Contrase√±a</label>
              <input id="pwd" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
            </div>
            <div class="form-actions">
              <button id="btn-login" class="btn btn-primary">Entrar</button>
            </div>
          </div>
          <p class="notice">La contrase√±a se configura en <code>.env</code> como <code>ADMIN_PASSWORD</code>.</p>
        </section>

        <!-- PANEL -->
        <section id="panel" style="display:none;" aria-label="Configuraci√≥n de la sala">
          <h3>Configuraci√≥n</h3>
          <div class="form-row">
            <div>
              <label for="range">Rango</label>
              <select id="range">
                <option value="5">1 ‚Äì 5</option>
                <option value="10" selected>1 ‚Äì 10</option>
                <option value="20">1 ‚Äì 20</option>
              </select>
            </div>
            <div>
              <label for="touches">Veces para ganar</label>
              <input id="touches" type="number" min="1" max="20" value="5" />
            </div>
            <div>
              <label for="winnersPerRound">Ganadores por ronda</label>
              <input id="winnersPerRound" type="number" min="1" max="10" value="3" />
            </div>
            <div class="form-actions gap">
              <button id="btn-save" class="btn btn-primary">Guardar</button>
              <button id="btn-reset" class="btn btn-ghost">Reiniciar ronda</button>
              <button id="btn-draw" class="btn btn-ghost">Sacar (forzar)</button>
            </div>
          </div>

          <h3 class="mt">Programar pr√≥ximas bolas</h3>
          <div class="form-row">
            <div class="col-span-2">
              <label for="preset">N√∫meros (separados por coma)</label>
              <input id="preset" type="text" placeholder="14, 7, 7, 3" />
            </div>
            <div class="form-actions">
              <button id="btn-preset" class="btn btn-primary">Agregar a la cola</button>
            </div>
          </div>
          <p class="small">Cola actual: <span id="queue">‚Äî</span></p>

          <h3 class="mt">Plan secreto (aparenta aleatorio)</h3>
          <div class="form-row">
            <div>
              <label for="plan-winners">Ganadores (1‚Äì3 n√∫meros)</label>
              <input id="plan-winners" type="text" placeholder="Ej: 1, 14, 7" />
            </div>
            <div>
              <label for="plan-gap">Separaci√≥n aleatoria (min‚Äìmax)</label>
              <input id="plan-gap" type="text" value="1-4" />
            </div>
            <div class="form-actions" style="display:flex;gap:8px">
              <button id="btn-plan" class="btn btn-primary">Planear</button>
              <button id="btn-plan-clear" class="btn btn-ghost btn-xs" title="Cancelar plan">Cancelar</button>
            </div>
          </div>
          <p class="small">
            Plan actual: <span id="plan-current">‚Äî</span> |
            Cola oculta: <span id="plan-left">0</span>
          </p>

          <h3>Predicci√≥n (faltantes para ganar)</h3>
          <div id="predict">‚Äî</div>

          <h3>Estado</h3>
          <pre id="state" class="state"></pre>
        </section>
      </article>
    </div>
  </main>

  <div class="toasts" id="toasts" aria-live="polite" aria-atomic="true"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/admin.js"></script>
</body>

</html>